<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Đố vui Nghề Nghiệp</title>
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dovuinghenghiep2.netlify.app">
    <meta property="og:title" content="Đố vui Nghề Nghiệp - Bé yêu khám phá">
    <meta property="og:description" content="Thử thách tài đoán nghề nghiệp: Thợ xây, Đầu bếp, Họa sĩ... cùng những vần thơ thú vị!">
    <meta property="og:image" content="https://dovuinghenghiep2.netlify.app/thumb_jobs_v3.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@600;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        .font-soft { font-family: 'Quicksand', sans-serif; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        .perspective-1000 { perspective: 1000px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .noselect { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; }
    </style>
</head>
<body class="bg-green-50 min-h-screen font-sans text-gray-800 flex flex-col items-center py-4 px-4">

    <div id="main-header" class="flex flex-col items-center justify-center w-full mb-4 gap-3">
        <h1 class="text-xl md:text-2xl font-bold text-green-700 flex items-center justify-center gap-2 text-center uppercase">
            <i data-lucide="briefcase" class="w-7 h-7"></i>
            CHỦ ĐỀ NGHỀ NGHIỆP
        </h1>
        
        <a href="https://zalo.me/g/hirmwg741" target="_blank" class="font-soft w-fit inline-flex items-center gap-2 bg-pink-500 text-white px-5 py-2.5 rounded-full text-[15px] font-bold hover:bg-pink-600 border-2 border-pink-500 transition-all shadow-md">
            <i data-lucide="heart" class="w-5 h-5 fill-current"></i>
            Tham gia cộng đồng Mẹ kể con nghe
        </a>
    </div>

    <div class="w-full max-w-lg perspective-1000 flex flex-col justify-center mb-4 flex-grow">
        <div 
            id="flashcard"
            class="relative w-full bg-white rounded-[2.5rem] shadow-xl overflow-hidden cursor-pointer transition-all duration-300 transform active:scale-[0.98] border-b-[8px] border-green-200 noselect"
            style="min-height: 600px;" 
            onclick="handleCardClick()"
        >
            <div class="absolute inset-0 p-3 flex flex-col h-full overflow-y-auto no-scrollbar pb-10">
                
                <div id="card-header" class="flex justify-between items-center text-[11px] md:text-xs font-black uppercase tracking-widest text-pink-500 mb-0">
                    <span id="question-counter">Câu: 1/13</span>
                    
                    <div id="audio-container" class="invisible">
                        <button onclick="playEnglishVoice(event)" class="py-1 px-3 rounded-full bg-amber-100 text-amber-600 hover:bg-amber-200 transition-all border border-amber-200 flex items-center gap-1 active:scale-90">
                            <i data-lucide="volume-2" class="w-4 h-4"></i>
                            <span class="text-[10px] font-bold">NGHE</span>
                        </button>
                    </div>

                    <span id="side-indicator" class="px-4 py-1 rounded-full bg-green-100 text-green-700">Câu đố</span>
                </div>

                <div id="card-content" class="flex-grow flex flex-col items-center justify-center text-center py-1"></div>
            </div>
        </div>
    </div>

    <div id="controls-area" class="w-full max-w-lg flex flex-col gap-2 mb-4">
        <div class="flex justify-between w-full gap-2">
            <button onclick="prevCard()" class="flex-1 flex items-center justify-center gap-2 bg-white active:bg-gray-100 text-gray-700 px-4 py-2.5 rounded-xl shadow-sm border border-gray-200 font-bold text-sm">
                <i data-lucide="chevron-left" class="w-4 h-4"></i> Trước
            </button>
            <button id="btn-next" onclick="nextCard()" class="flex-1 flex items-center justify-center gap-2 bg-green-600 active:bg-green-700 text-white px-4 py-2.5 rounded-xl shadow-md font-bold text-sm">
                Sau <i data-lucide="chevron-right" class="w-4 h-4"></i>
            </button>
        </div>
        <div class="flex justify-center gap-2 w-full">
            <button id="btn-hint" onclick="toggleHint()" class="flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold bg-white text-gray-600 border border-gray-100">
                <i data-lucide="lightbulb" class="w-3.5 h-3.5"></i> <span id="hint-text">Bật gợi ý</span>
            </button>
            <button onclick="resetApp()" class="flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-xs font-semibold bg-white text-gray-600 border border-gray-100">
                <i data-lucide="rotate-ccw" class="w-3.5 h-3.5"></i> Làm lại
            </button>
        </div>
    </div>

    <script>
        // Dữ liệu câu đố chủ đề NGHỀ NGHIỆP - Đã sửa nội dung Facts đầy đủ hơn
        const flashcards = [
            { 
                id: 1, 
                question: "Sáng chiều cầm chổi\nQuét sạch phố phường\nCho đường sạch đẹp?", 
                explanation: "Cô Quét Rác", 
                english: "Street Sweeper", 
                image: "co-quet-rac.webp", 
                hint: "Người thường làm việc vào sáng sớm hoặc đêm khuya để giữ đường phố không có rác.", 
                facts: [
                    "Các cô giúp cho môi trường sống của chúng ta luôn xanh, sạch và đẹp.", 
                    "Dụng cụ làm việc quen thuộc của cô là chiếc chổi tre dài và xe đẩy rác.", 
                    "Bé hãy nhớ luôn bỏ rác đúng nơi quy định để giúp các cô đỡ vất vả nhé."
                ] 
            },
            { 
                id: 2, 
                question: "Nghề gì vất vả\nXây những nhà cao\nCông sức lớn lao\nCho em tổ ấm?", 
                explanation: "Bác Thợ Xây", 
                english: "Construction Worker", 
                image: "bac-tho-xay.webp", 
                hint: "Người dùng gạch, vữa và xi măng để tạo nên những ngôi nhà kiên cố.", 
                facts: [
                    "Các bác thợ xây phải biết đọc bản vẽ thiết kế để xây nhà thật chính xác.", 
                    "Khi làm việc, các bác luôn đội mũ bảo hộ cứng để bảo vệ an toàn.", 
                    "Công việc xây dựng ngoài trời thường rất vất vả vì nắng mưa."
                ] 
            },
            { 
                id: 3, 
                question: "Bào cưa đục đẽo suốt ngày\nLàm ra giường tủ, khéo tay ai bằng?", 
                explanation: "Bác Thợ Mộc", 
                english: "Carpenter", 
                image: "bac-tho-moc.webp", 
                hint: "Người làm việc với gỗ để đóng bàn ghế, giường tủ cho bé dùng.", 
                facts: [
                    "Dụng cụ của bác thợ mộc thường là cái cưa, cái bào và cái đục.", 
                    "Bác thợ mộc tạo ra bàn ghế, tủ gỗ và những đồ nội thất đẹp trong nhà.", 
                    "Để làm nghề này cần có đôi bàn tay vô cùng khéo léo và tỉ mỉ."
                ] 
            },
            { 
                id: 4, 
                question: "Ai người leo cột\nMắc dây điện về\nSáng rực làng quê\nSáng cho nhà bé?", 
                explanation: "Thợ Điện", 
                english: "Electrician", 
                image: "tho-dien.webp", 
                hint: "Người mặc áo cam, trèo lên cột cao để sửa chữa khi mất điện.", 
                facts: [
                    "Các chú thợ điện giúp mang ánh sáng đến cho mọi nhà và trường học.", 
                    "Nghề điện cần tuân thủ các quy tắc an toàn rất nghiêm ngặt.", 
                    "Các chú sẽ đến sửa chữa ngay khi đường dây điện hoặc thiết bị gặp sự cố."
                ] 
            },
            { 
                id: 5, 
                question: "Đầu đội mũ trắng\nTay cầm chảo xinh\nMón xào, món ninh\nNấu gì cũng tuyệt?", 
                explanation: "Đầu Bếp", 
                english: "Chef", 
                image: "dau-bep.webp", 
                hint: "Người nấu ra những món ăn thật ngon trong nhà hàng, khách sạn.", 
                facts: [
                    "Các bác đầu bếp thường đội một chiếc mũ vải màu trắng rất cao.", 
                    "Đầu bếp chuyên nghiệp biết nấu rất nhiều món ăn ngon từ Á sang Âu.", 
                    "Khu vực nhà bếp lúc nào cũng phải được giữ gìn vệ sinh thật sạch sẽ."
                ] 
            },
            { 
                id: 6, 
                question: "Ai người đo vải\nRồi lại cắt may\nÁo quần đẹp ngay\nNhờ bàn tay đó?", 
                explanation: "Thợ May", 
                english: "Tailor", 
                image: "tho-may.webp", 
                hint: "Người dùng kim chỉ và máy khâu để may quần áo mới cho bé.", 
                facts: [
                    "Cô thợ may dùng thước dây để đo kích thước cơ thể thật chính xác.", 
                    "Từ những mảnh vải, cô thợ may biến hóa thành những bộ quần áo đẹp.", 
                    "Nghề may vá đòi hỏi sự kiên nhẫn và đôi mắt tinh tường từng đường kim."
                ] 
            },
            { 
                id: 7, 
                question: "Ai cầm cái kéo\nTỉa tóc gọn gàng\nCho bé cười vang\nKhen ngoan đẹp quá?", 
                explanation: "Thợ Cắt Tóc", 
                english: "Hairdresser", 
                image: "tho-cat-toc.webp", 
                hint: "Người cầm kéo và lược, giúp bé có mái tóc gọn gàng xinh xắn.", 
                facts: [
                    "Thợ cắt tóc giúp mọi người có những kiểu tóc mới gọn gàng và thời trang.", 
                    "Dụng cụ chính của họ là kéo cắt, lược chải và chiếc tông đơ.", 
                    "Nơi làm việc của thợ cắt tóc thường được gọi là tiệm làm tóc hoặc salon."
                ] 
            },
            { 
                id: 8, 
                question: "Ai cầm cái bút\nVẽ cảnh vẽ người\nBức tranh thắm tươi\nĐẹp như mộng ước?", 
                explanation: "Họa Sĩ", 
                english: "Artist", 
                image: "hoa-si.webp", 
                hint: "Người dùng cọ, màu và giá vẽ để tạo nên những bức tranh đầy màu sắc.", 
                facts: [
                    "Họa sĩ là những người có trí tưởng tượng vô cùng phong phú và bay bổng.", 
                    "Tranh có thể được vẽ bằng nhiều chất liệu như màu nước, sơn dầu, sáp màu.", 
                    "Những bức tranh đẹp của họa sĩ thường được trưng bày tại các triển lãm."
                ] 
            },
            { 
                id: 9, 
                question: "Ai cầm chiếc máy\nBấm “tách” là ra\nẢnh xinh cả nhà\nAi nhìn cũng đẹp?", 
                explanation: "Thợ Chụp Ảnh", 
                english: "Photographer", 
                image: "tho-chup-anh.webp", 
                hint: "Người cầm máy ảnh (camera) để lưu lại những khoảnh khắc đẹp cho mọi người.", 
                facts: [
                    "Nhiếp ảnh gia giúp chúng ta lưu giữ lại những kỷ niệm đẹp trong cuộc sống.", 
                    "Để có ảnh đẹp, họ phải biết cách chọn góc đứng và ánh sáng phù hợp.", 
                    "Thợ chụp ảnh có thể chụp phong cảnh thiên nhiên hoặc chụp chân dung người."
                ] 
            },
            { 
                id: 10, 
                question: "Ai người tài giỏi\nĐi lại trên dây\nKhán giả vỗ tay\nLời khen không ngớt?", 
                explanation: "Diễn Viên Xiếc", 
                english: "Circus Performer", 
                image: "dien-vien-xiec.webp", 
                hint: "Người biểu diễn những trò mạo hiểm, nhào lộn thú vị trong rạp xiếc.", 
                facts: [
                    "Diễn viên xiếc phải tập luyện rất chăm chỉ và vô cùng dũng cảm.", 
                    "Họ mang lại niềm vui, tiếng cười và sự hồi hộp cho khán giả.", 
                    "Có nhiều loại hình xiếc như xiếc thú, nhào lộn, hay đi trên dây."
                ] 
            },
            { 
                id: 11, 
                question: "Dáng đi uyển chuyển\nQuần áo đẹp xinh\nGương mặt lung linh\nTrên sàn diễn lớn?", 
                explanation: "Người Mẫu", 
                english: "Model", 
                image: "nguoi-mau.webp", 
                hint: "Người mặc những bộ quần áo thời trang mới nhất và đi trình diễn trên sân khấu.", 
                facts: [
                    "Người mẫu là người trình diễn các bộ sưu tập quần áo thời trang mới nhất.", 
                    "Họ cần có dáng đi thẳng, tự tin và thần thái chuyên nghiệp.", 
                    "Người mẫu thường xuất hiện trên các sàn diễn, tạp chí và truyền hình."
                ] 
            },
            { 
                id: 12, 
                question: "Ai người bay lượn trên cao\nGiữa ngàn mây trắng, đón chào nắng mai?", 
                explanation: "Phi Công", 
                english: "Pilot", 
                image: "phi-cong.webp", 
                hint: "Người điều khiển máy bay, đưa hành khách đi du lịch khắp nơi.", 
                facts: [
                    "Phi công làm việc trong buồng lái với rất nhiều nút bấm phức tạp.", 
                    "Để làm phi công cần có sức khỏe thật tốt và đôi mắt sáng tinh anh.", 
                    "Nhiệm vụ của phi công là đưa hành khách đến nơi an toàn và đúng giờ."
                ] 
            },
            { 
                id: 13, 
                question: "Ai cầm tay lái\nĐiều khiển tàu to\nVượt qua sóng gió\nĐi khắp đại dương?", 
                explanation: "Thuyền Trưởng", 
                english: "Captain", 
                image: "thuyen-truong.webp", 
                hint: "Người đứng đầu chỉ huy con tàu thủy lớn lênh đênh trên biển cả.", 
                facts: [
                    "Thuyền trưởng là người chịu trách nhiệm cao nhất trên một con tàu thủy.", 
                    "Họ rất am hiểu về biển cả, các luồng lạch và bản đồ hàng hải.", 
                    "Thuyền trưởng thường phải làm việc xa nhà dài ngày lênh đênh trên biển."
                ] 
            }
        ];

        let currentIndex = 0;
        let isFlipped = false;
        let showHint = false;
        let isEndScreen = false;

        // Elements
        const contentEl = document.getElementById('card-content');
        const counterEl = document.getElementById('question-counter');
        const indicatorEl = document.getElementById('side-indicator');
        const cardHeader = document.getElementById('card-header');
        const btnHint = document.getElementById('btn-hint');
        const hintTextEl = document.getElementById('hint-text');
        const btnNext = document.getElementById('btn-next');
        const audioContainer = document.getElementById('audio-container');
        const controlsArea = document.getElementById('controls-area');
        const mainHeader = document.getElementById('main-header');

        // === BIẾN TOÀN CỤC: Giữ âm thanh không bị trình duyệt xóa ===
        let currentUtterance = null;

        function playEnglishVoice(event) {
            // 1. Chặn click lan ra ngoài (Quan trọng để không bị lật thẻ)
            if (event) {
                event.stopPropagation();
                event.preventDefault(); 
            }
            
            const card = flashcards[currentIndex];
            if (!card || !card.english) return;

            // 2. Dừng âm thanh cũ
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }

            // 3. Khởi tạo đối tượng đọc và gán vào biến TOÀN CỤC
            currentUtterance = new SpeechSynthesisUtterance(card.english);
            currentUtterance.lang = 'en-US'; 
            currentUtterance.rate = 0.8;
            currentUtterance.pitch = 1.0; 

            // 4. Chọn giọng đọc
            const voices = window.speechSynthesis.getVoices();
            if (voices.length > 0) {
                const preferred = voices.find(v => v.lang === 'en-US' && v.name.includes('Google')) ||
                                  voices.find(v => v.lang === 'en-US');
                if (preferred) currentUtterance.voice = preferred;
            }

            // 5. Dọn dẹp biến khi đọc xong
            currentUtterance.onend = function() {
                currentUtterance = null;
            };
            
            currentUtterance.onerror = function(e) {
                console.error('Audio error:', e);
                currentUtterance = null;
            };

            // 6. Phát âm thanh
            window.speechSynthesis.speak(currentUtterance);
        }

        if (typeof speechSynthesis !== 'undefined' && speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = () => { window.speechSynthesis.getVoices(); };
        }

        function resetApp() { 
            if (event) event.stopPropagation(); 
            if (mainHeader) mainHeader.style.display = 'flex'; 
            if (controlsArea) controlsArea.style.display = 'flex';
            if (cardHeader) cardHeader.style.display = 'flex';
            
            currentIndex = 0; 
            isFlipped = false; 
            showHint = false; 
            isEndScreen = false; 
            renderCard(); 
        }

        function renderEndScreen() {
            const mainHeader = document.getElementById('main-header');
            if (mainHeader) mainHeader.style.display = 'none';
            if (cardHeader) cardHeader.style.display = 'none';
            if (controlsArea) controlsArea.style.display = 'none';

            contentEl.innerHTML = `
                <div class="animate-fade-in flex flex-col items-center justify-center w-full h-full px-4">
                    <div class="relative mb-6">
                        <div class="w-24 h-24 bg-green-50 rounded-full flex items-center justify-center border-[3px] border-white shadow-lg z-10">
                            <i data-lucide="medal" class="w-12 h-12 text-green-500" stroke-width="2"></i>
                        </div>
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-36 h-36 bg-green-100 rounded-full opacity-40 -z-10"></div>
                    </div>
                    <h2 class="text-xl md:text-3xl font-black text-slate-900 mb-3 text-center leading-tight whitespace-nowrap">
                        Chúc mừng! Bé thật là xuất sắc!
                    </h2>
                    <p class="text-gray-500 font-medium text-sm md:text-base mb-8 text-center">
                        Bé đã trả lời xong 13 câu đố về nghề nghiệp
                    </p>
                    <a href="https://catalog.zalo.me/?cid=Cj7DJZwIc0rDhRz0DP6M2ZogmrT3w-GVCQNEIK2Gdc0fjSuv98Jh5G" target="_blank" 
                       class="font-soft w-fit inline-flex items-center justify-center gap-2 bg-pink-500 hover:bg-pink-600 active:bg-pink-700 text-white px-6 py-3 rounded-full font-bold text-sm shadow-lg shadow-pink-200 mb-3">
                        <i data-lucide="shopping-basket" class="w-5 h-5"></i>
                        Xem sản phẩm tốt cho mẹ và bé
                    </a>
                    <button onclick="resetApp()" 
                            class="w-fit inline-flex items-center justify-center gap-2 bg-white border-2 border-green-300 text-green-600 hover:bg-green-50 active:bg-green-100 px-6 py-3 rounded-full font-bold text-sm shadow-sm transition-all active:scale-95">
                        <i data-lucide="home" class="w-5 h-5"></i>
                        Quay về trang đầu
                    </button>
                </div>`;
            lucide.createIcons();
        }

        function renderCard() {
            if (isEndScreen) { renderEndScreen(); return; }
            if (mainHeader) mainHeader.style.display = 'flex';
            if (cardHeader) cardHeader.style.display = 'flex';
            if (controlsArea) controlsArea.style.display = 'flex';

            const card = flashcards[currentIndex];
            counterEl.textContent = `Câu: ${currentIndex + 1}/${flashcards.length}`;
            
            if (isFlipped) {
                indicatorEl.textContent = 'Đáp án';
                indicatorEl.className = 'px-4 py-1 rounded-full bg-green-100 text-green-700 transition-colors duration-300';
                btnHint.disabled = true;
                btnHint.classList.add('opacity-50', 'bg-gray-50');
                audioContainer.classList.remove('invisible');
            } else {
                indicatorEl.textContent = 'Câu đố';
                indicatorEl.className = 'px-4 py-1 rounded-full bg-blue-100 text-blue-700 transition-colors duration-300';
                btnHint.disabled = false;
                btnHint.classList.remove('opacity-50', 'bg-gray-50');
                audioContainer.classList.add('invisible');
            }
            
            hintTextEl.textContent = showHint ? 'Ẩn gợi ý' : 'Bật gợi ý';
            btnNext.innerHTML = currentIndex === flashcards.length - 1 ? 'Xong <i data-lucide="check" class="w-4 h-4"></i>' : 'Sau <i data-lucide="chevron-right" class="w-4 h-4"></i>';

            if (!isFlipped) {
                contentEl.innerHTML = `
                    <div class="animate-fade-in w-full px-4 flex flex-col items-center h-full justify-center">
                        <div class="w-fit bg-pink-50/80 rounded-2xl p-6 mb-6 border border-pink-200/50 shadow-sm relative mx-auto">
                            
                            <h3 class="text-left text-xl md:text-2xl font-bold text-slate-800 leading-relaxed whitespace-pre-line italic relative z-10 pl-2">
                                "${card.question}"
                            </h3>
                        </div>
                        
                        <div class="flex items-center gap-2 text-pink-600 mt-2 select-none opacity-80">
                            <span class="text-sm font-extrabold uppercase tracking-wide">Lật mặt sau để xem đáp án</span>
                        </div>
                        
                        ${showHint ? `<div class="mt-4 p-4 bg-yellow-50 text-yellow-900 text-[14px] leading-relaxed rounded-xl border border-yellow-200 animate-fade-in text-left shadow-inner w-full"><span class="font-bold flex items-center gap-2 mb-1 text-yellow-700"><i data-lucide="baby" class="w-4 h-4"></i> Gợi ý cho bé:</span>${card.hint}</div>` : ''}
                    </div>`;
            } else {
                // Đã sửa layout phần Facts để chữ không bị cắt và dễ đọc hơn
                contentEl.innerHTML = `
                    <div class="animate-fade-in w-full flex flex-col items-center">
                        <div class="img-container w-full max-w-[480px] aspect-square rounded-[2rem] overflow-hidden border-4 border-white mb-2 shadow-sm">
                            <img src="${card.image}" alt="${card.explanation}" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/500x500/86efac/166534?text=${encodeURIComponent(card.explanation)}'">
                        </div>
                        <div class="w-full flex items-center justify-center gap-2 mb-3 px-2 text-center flex-wrap">
                            <span class="text-2xl md:text-3xl font-black text-green-700 uppercase tracking-tight leading-none">
                                ${card.explanation}
                            </span>
                            <span class="text-xl text-amber-400 font-bold hidden md:inline">-</span>
                            <span class="text-xl md:text-2xl font-bold text-amber-600 uppercase italic tracking-wide leading-none">
                                ${card.english}
                            </span>
                        </div>
                        <div class="w-full bg-green-50 rounded-2xl p-4 text-left border border-green-100 shadow-sm">
                            <p class="text-[14px] font-bold text-green-900 mb-2 flex items-center gap-2">
                                <i data-lucide="sparkles" class="w-4 h-4 text-green-600"></i> 
                                3 sự thật thú vị:
                            </p>
                            <ul class="space-y-2">
                                ${card.facts.map(fact => `
                                    <li class="text-[13px] md:text-[14px] text-gray-700 flex items-start gap-2 text-left">
                                        <span class="text-green-500 font-bold text-lg leading-none mt-0.5">•</span>
                                        <span class="leading-normal flex-1">${fact}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>`;
            }
            lucide.createIcons();
        }

        function handleCardClick() { if (!isEndScreen) { isFlipped = !isFlipped; renderCard(); } }
        function nextCard() { if (event) event.stopPropagation(); if (currentIndex < flashcards.length - 1) { currentIndex++; isFlipped = false; showHint = false; renderCard(); } else { isEndScreen = true; renderCard(); } }
        function prevCard() { if (event) event.stopPropagation(); if (isEndScreen) { isEndScreen = false; renderCard(); return; } if (currentIndex > 0) { currentIndex--; isFlipped = false; showHint = false; renderCard(); } }
        function toggleHint() { if (event) event.stopPropagation(); if(!isFlipped) { showHint = !showHint; renderCard(); } }

        window.speechSynthesis.getVoices();
        lucide.createIcons();
        renderCard();
    </script>
</body>
</html>